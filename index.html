<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>Trivia VR - Prototipo</title>
    <script src="https://aframe.io/releases/1.6.0/aframe.min.js"></script>
    <script src="https://unpkg.com/aframe-environment-component/dist/aframe-environment-component.min.js"></script>
    
    <script>
      // Lógica simple del juego
      AFRAME.registerComponent('game-logic', {
        init: function () {
          var el = this.el; // El botón
          var textPanel = document.querySelector('#pregunta-texto');
          var imgPanel = document.querySelector('#imagen-pregunta');
          
          // Base de datos de prueba
          var preguntas = [
            { txt: "¿Cual es la capital de Peru?", img: "#img1" },
            { txt: "¿En que año llego el hombre a la luna?", img: "#img2" },
            { txt: "¡Ganaste! Esperando nuevo juego...", img: "#img1" }
          ];
          var index = 0;

          // Evento al hacer clic/golpear el botón
          el.addEventListener('click', function () {
            // Sonido o lógica de "quién ganó el turno" iría aquí
            console.log("¡Botón presionado!");
            
            // Cambiar pregunta (simulación)
            index = (index + 1) % preguntas.length;
            textPanel.setAttribute('value', preguntas[index].txt);
            
            // Aquí cambiarías la imagen real
            // imgPanel.setAttribute('src', preguntas[index].img); 
          });
        }
      });
    </script>
  </head>
  <body>
    <a-scene>
      <a-assets>
        <img id="cartel-bg" src="https://cdn.aframe.io/examples/ui/ui-panel.png">
        </a-assets>

      <a-entity environment="preset: tron; grid: 1x1; gridColor: orange; skyColor: #111"></a-entity>

      <a-entity>
        <a-camera position="0 1.6 0">
          <a-cursor color="yellow" fuse="false"></a-cursor>
        </a-camera>
        <a-entity laser-controls="hand: right"></a-entity>
        <a-entity laser-controls="hand: left"></a-entity>
      </a-entity>

      <a-entity position="0 2.2 -3">
        <a-curvedimage src="#cartel-bg" height="3.0" radius="5.7" theta-length="72"
                       rotation="0 144 0" scale="0.8 0.8 0.8"></a-curvedimage>
        
        <a-text id="pregunta-texto" value="¿Estas listo para jugar?\nPresiona el boton rojo."
                font="kelsonsans" align="center" width="6" position="0 0.5 0.1" color="white"></a-text>
        
        <a-image id="imagen-pregunta" color="gray" width="1.5" height="1" position="0 -0.5 0.2"></a-image>
      </a-entity>

      <a-entity position="0 0.8 -2">
        <a-cylinder color="#444" height="1" radius="0.15"></a-cylinder>
        
        <a-cylinder id="boton-juego" game-logic class="clickable"
                    color="#FF0000" height="0.1" radius="0.2" position="0 0.55 0"
                    animation="property: position; from: 0 0.55 0; to: 0 0.45 0; startEvents: click; dur: 100; dir: alternate; loop: 1">
        </a-cylinder>
        
        <a-text value="PRESIONAR" align="center" position="0 0.2 0.3" width="2" rotation="-45 0 0"></a-text>
      </a-entity>

    </a-scene>
  </body>
</html>